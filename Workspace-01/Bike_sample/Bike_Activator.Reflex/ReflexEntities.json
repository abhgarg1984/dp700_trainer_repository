[
  {
    "uniqueIdentifier": "2942a593-7119-43f3-b5cd-39929e3d7b31",
    "payload": {
      "name": "Bike_RTDashboard",
      "type": "kqlQueries"
    },
    "type": "container-v1"
  },
  {
    "uniqueIdentifier": "0e7e1845-1b48-4c8d-98e9-80c11d6ad460",
    "payload": {
      "name": "Bicycles event",
      "runSettings": {
        "executionIntervalInSeconds": 86400
      },
      "query": {
        "queryString": "declare query_parameters (startTime:datetime, _placeHolder__end:datetime);\nlet InNeighborhood = dynamic(null);\nlet InStreet = dynamic(null);\nlet FilterBikeStream = () {\n    Bikestream\n    | where isempty(['InNeighborhood']) or Neighbourhood in (['InNeighborhood'])\n    | where isempty(['InStreet']) or Street in (['InStreet'])\n    | extend ingestionTime = ingestion_time()\n    | extend fill_rate = toreal(No_Bikes) / (No_Bikes + No_Empty_Docks)\n};\nlet minimumTime = toscalar(FilterBikeStream | summarize min(ingestionTime));\nlet from=max_of(startTime, minimumTime);\nFilterBikeStream\n| make-series emptyDocks=max(No_Empty_Docks)  default=int(null)\n    on ingestionTime from from to now() step max_of((now() - from)/100, 1d) by BikepointID\n| extend emptyDocks = series_fill_linear(emptyDocks)\n| mvexpand emptyDocks, ingestionTime\n| summarize ['Available Docks'] = sum(toint(emptyDocks)) by todatetime(ingestionTime)"
      },
      "eventhouseItem": {
        "itemId": "e4853155-c241-8320-4e14-e79f99adaa75",
        "workspaceId": "00000000-0000-0000-0000-000000000000",
        "itemType": "KustoDatabase"
      },
      "eventTimeSettings": {
        "ingestionDelayInSeconds": 0,
        "timeFieldName": "ingestionTime"
      },
      "queryParameters": [
        {
          "name": "startTime",
          "type": "DURATION_START",
          "value": "datetime(2025-07-28T17:54:41Z)"
        },
        {
          "name": "_placeHolder__end",
          "type": "DURATION_END",
          "value": "datetime(2025-07-28T18:54:41Z)"
        }
      ],
      "metadata": {
        "workspaceId": "31f9cbf4-392e-41c7-aa92-cff7786209b2",
        "measureName": "Available Docks",
        "dashboardId": "b1a7a7d4-e342-4040-9049-f709b09bbf9a",
        "visualId": "f4276e74-e8d0-4433-a998-7aaf61d4f2e9"
      },
      "parentContainer": {
        "targetUniqueIdentifier": "2942a593-7119-43f3-b5cd-39929e3d7b31"
      }
    },
    "type": "kqlSource-v1"
  },
  {
    "uniqueIdentifier": "67c32ddd-ba2e-4837-baa9-c822553cdb2e",
    "payload": {
      "name": "Bicycles event",
      "parentContainer": {
        "targetUniqueIdentifier": "2942a593-7119-43f3-b5cd-39929e3d7b31"
      },
      "definition": {
        "type": "Event",
        "instance": "{\"templateId\":\"SourceEvent\",\"templateVersion\":\"1.1\",\"steps\":[{\"name\":\"SourceEventStep\",\"id\":\"0ecc0fbb-00e8-45bb-8a33-8fd89af25ccc\",\"rows\":[{\"name\":\"SourceSelector\",\"kind\":\"SourceReference\",\"arguments\":[{\"name\":\"entityId\",\"type\":\"string\",\"value\":\"0e7e1845-1b48-4c8d-98e9-80c11d6ad460\"}]}]}]}"
      }
    },
    "type": "timeSeriesView-v1"
  },
  {
    "uniqueIdentifier": "9334d388-4ae6-419d-910c-b2382dd2475f",
    "payload": {
      "name": "Bicycles alert",
      "parentContainer": {
        "targetUniqueIdentifier": "2942a593-7119-43f3-b5cd-39929e3d7b31"
      },
      "definition": {
        "type": "Rule",
        "instance": "{\"templateId\":\"EventTrigger\",\"templateVersion\":\"1.1\",\"steps\":[{\"name\":\"FieldsDefaultsStep\",\"id\":\"2ad82b73-9083-41b7-883e-2c3e9d2f9347\",\"rows\":[{\"name\":\"EventSelector\",\"kind\":\"Event\",\"arguments\":[{\"kind\":\"EventReference\",\"type\":\"complex\",\"arguments\":[{\"name\":\"entityId\",\"type\":\"string\",\"value\":\"67c32ddd-ba2e-4837-baa9-c822553cdb2e\"}],\"name\":\"event\"}]}]},{\"name\":\"EventDetectStep\",\"id\":\"8ec3de19-72b1-4026-9a68-b53086717efc\",\"rows\":[{\"name\":\"EventFieldSelector\",\"kind\":\"EventField\",\"arguments\":[{\"name\":\"fieldName\",\"type\":\"string\",\"value\":\"Available Docks\"}]},{\"name\":\"NumberValueCondition\",\"kind\":\"NumberValueCondition\",\"arguments\":[{\"name\":\"op\",\"type\":\"string\",\"value\":\"IsGreaterThanOrEqualTo\"},{\"name\":\"threshold\",\"type\":\"number\",\"value\":1500.0}]}]},{\"name\":\"ActStep\",\"id\":\"6067a914-bf6e-4164-8c8f-48d63520a504\",\"rows\":[{\"name\":\"EmailBinding\",\"kind\":\"EmailMessage\",\"arguments\":[{\"name\":\"messageLocale\",\"type\":\"string\",\"value\":\"\"},{\"name\":\"sentTo\",\"type\":\"array\",\"values\":[{\"type\":\"string\",\"value\":\"dp700_trainer_admin@mageshmmmgmail.onmicrosoft.com\"}]},{\"name\":\"copyTo\",\"type\":\"array\",\"values\":[]},{\"name\":\"bCCTo\",\"type\":\"array\",\"values\":[]},{\"name\":\"subject\",\"type\":\"array\",\"values\":[{\"type\":\"string\",\"value\":\"Activator Alert: Daily Available Docks Report\"}]},{\"name\":\"headline\",\"type\":\"array\",\"values\":[{\"type\":\"string\",\"value\":\"New event from Bicycles\"}]},{\"name\":\"optionalMessage\",\"type\":\"array\",\"values\":[{\"type\":\"string\",\"value\":\"\"}]},{\"name\":\"additionalInformation\",\"type\":\"array\",\"values\":[]}]}]}]}",
        "settings": {
          "shouldRun": true,
          "shouldApplyRuleOnUpdate": false
        }
      }
    },
    "type": "timeSeriesView-v1"
  }
]